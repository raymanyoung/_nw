<script type="text/javascript" >
    var mapping = [
{index:1 , id: 8    , x:7  , y:0},
{index:2 , id: 9    , x:8  , y:0},
{index:3 , id: 10    , x:9  , y:0},
{index:4 , id: 38    , x:7  , y:1},
{index:5 , id: 39    , x:8  , y:1},
{index:6 , id: 40    , x:9  , y:1},
{index:7 , id: 68    , x:7  , y:2},
{index:8 , id: 69    , x:8  , y:2},
{index:9 , id: 70    , x:9  , y:2},
{index:10 , id: 115    , x:24  , y:3},
{index:11 , id: 116    , x:25  , y:3},
{index:12 , id: 117    , x:26  , y:3},
{index:13 , id: 145    , x:24  , y:4},
{index:14 , id: 146    , x:25  , y:4},
{index:15 , id: 147    , x:26  , y:4},
{index:16 , id: 165    , x:14  , y:5},
{index:17 , id: 166    , x:15  , y:5},
{index:18 , id: 167    , x:16  , y:5},
{index:19 , id: 175    , x:24  , y:5},
{index:20 , id: 176    , x:25  , y:5},
{index:21 , id: 177    , x:26  , y:5},
{index:22 , id: 195    , x:14  , y:6},
{index:23 , id: 196    , x:15  , y:6},
{index:24 , id: 197    , x:16  , y:6},
{index:25 , id: 225    , x:14  , y:7},
{index:26 , id: 226    , x:15  , y:7},
{index:27 , id: 227    , x:16  , y:7},
{index:28 , id: 335    , x:4  , y:11},
{index:29 , id: 336    , x:5  , y:11},
{index:30 , id: 337    , x:6  , y:11},
{index:31 , id: 365    , x:4  , y:12},
{index:32 , id: 366    , x:5  , y:12},
{index:33 , id: 367    , x:6  , y:12},
{index:34 , id: 395    , x:4  , y:13},
{index:35 , id: 396    , x:5  , y:13},
{index:36 , id: 397    , x:6  , y:13},
{index:37 , id: 407    , x:16  , y:13},
{index:38 , id: 408    , x:17  , y:13},
{index:39 , id: 409    , x:18  , y:13},
{index:40 , id: 437    , x:16  , y:14},
{index:41 , id: 438    , x:17  , y:14},
{index:42 , id: 439    , x:18  , y:14},
{index:43 , id: 467    , x:16  , y:15},
{index:44 , id: 468    , x:17  , y:15},
{index:45 , id: 469    , x:18  , y:15},
{index:46 , id: 534    , x:23  , y:17},
{index:47 , id: 535    , x:24  , y:17},
{index:48 , id: 536    , x:25  , y:17},
{index:49 , id: 564    , x:23  , y:18},
{index:50 , id: 565    , x:24  , y:18},
{index:51 , id: 566    , x:25  , y:18},
{index:52 , id: 594    , x:23  , y:19},
{index:53 , id: 595    , x:24  , y:19},
{index:54 , id: 596    , x:25  , y:19},
{index:55 , id: 670    , x:9  , y:22},
{index:56 , id: 671    , x:10  , y:22},
{index:57 , id: 672    , x:11  , y:22},
{index:58 , id: 700    , x:9  , y:23},
{index:59 , id: 701    , x:10  , y:23},
{index:60 , id: 702    , x:11  , y:23},
{index:61 , id: 730    , x:9  , y:24},
{index:62 , id: 731    , x:10  , y:24},
{index:63 , id: 732    , x:11  , y:24},
{index:64 , id: 767    , x:16  , y:25},
{index:65 , id: 768    , x:17  , y:25},
{index:66 , id: 769    , x:18  , y:25},
{index:67 , id: 797    , x:16  , y:26},
{index:68 , id: 798    , x:17  , y:26},
{index:69 , id: 799    , x:18  , y:26},
{index:70 , id: 805    , x:24  , y:26},
{index:71 , id: 806    , x:25  , y:26},
{index:72 , id: 807    , x:26  , y:26},
{index:73 , id: 811    , x:0  , y:27},
{index:74 , id: 812    , x:1  , y:27},
{index:75 , id: 813    , x:2  , y:27},
{index:76 , id: 827    , x:16  , y:27},
{index:77 , id: 828    , x:17  , y:27},
{index:78 , id: 829    , x:18  , y:27},
{index:79 , id: 835    , x:24  , y:27},
{index:80 , id: 836    , x:25  , y:27},
{index:81 , id: 837    , x:26  , y:27},
{index:82 , id: 841    , x:0  , y:28},
{index:83 , id: 842    , x:1  , y:28},
{index:84 , id: 843    , x:2  , y:28},
{index:85 , id: 865    , x:24  , y:28},
{index:86 , id: 866    , x:25  , y:28},
{index:87 , id: 867    , x:26  , y:28},
{index:88 , id: 871    , x:0  , y:29},
{index:89 , id: 872    , x:1  , y:29},
{index:90 , id: 873    , x:2  , y:29},
    ];

	function map(char) {
		index = char.charCodeAt(0)
		if (index >= 48 && index <= 57) // 0 - 9
			inc = index - 48;		
		if (index >= 97 && index <= 122) // a-z
			inc = index - 97 + 10;
		if (index >= 65 && index <= 90) // A-Z
		 	inc = index - 65 + 36	;
		return inc;		
	}

	function calcHash(hash) {
		var index = 7
		var total = 0;
		for (var i = 0; i < hash.length; i++) {
		    total += map(hash.charAt(i)) * index;
		    index += 10;
		}
        return total;
	}

	function calc(hash) {
        var result = calcHash(hash);
        var landIndex = result % 90;
        if (landIndex == 0) landIndex = 90;
        var land = mapping[landIndex-1];
        return `HASH: ${hash}\n转化数字:${result}\n地块序号:${landIndex}\n地块ID:${land.id}, X: ${land.x}, Y: ${land.y}` + "\n";   
	}

    function calcBidIndex(hash, totalTimes) {
        var result = calcHash(hash);
        var index = result % totalTimes + 1;
        return `HASH: ${hash}\n转化数字:${result}\n共有${totalTimes}次出价，第${index}次出价者获得奖励`;        
    }

    function getLand() {
        var h = $('#hash').val();
        var result = calc(h);
        var input = $('#output').val();
        $('#output').val(input + result + "\n");
    }

    function getPersonIndex() {
        var h = $('#hash').val();
        var n = parseInt($('#times').val());
        var result = calcBidIndex(h, n);
        var input = $('#output').val();
        $('#output').val(input + result + "\n");
    }

    function test() {
        var list = ['3036756d510cc53754b769cb02184ce3b927740467d83aaa329ad888327b3dbd', 
            '8a1ef9ad3312735c102403dfc11818c5c7fbcd4b987eee667d10b9695f00ba53', 
            'fd4d351e1ef6f2aca928f4c6d66aad8c5b43099d85f8b90ee4a03bf5e69f1365', 
            'd774c0940b3bb4dd37d54a16ed2ee8cff0a0fcc6b93156d90560b24a97bf3bd8', 
            '1ba8e784284cf3633a1729c32177872442149401e305e3f43b72f7a72915d7e3', 
            'ea056d1b260b58fd586434f35498c8a1853691e67fb839efb060d6bc8d43eed0', 
            '3647a4a855819bb1ba11e7da6c7079a1e2f6ad9333300cc9b933876a70ba7c4a', 
            '321b2f8c59372ff55c96ee4f668579c8f02fc9c011ef16d59e74124352c7efe3', 
            'f6bd6b98c5922ee92ced5a2add53c23409739f135f9dacaf7566ccf28fa95eac', 
            '27fc01ccf6874c9e4ce00a9ced73ce9b3d8b09c523b53476c169005e71119bd1', 
            'de00345a3cfd88c0ba1ea3e19b2c27025e58047ccb2564c0857e0f160de33d8a', 
            '0a1a5fbf5647cb476a1072ae5e0bea918309ee344738a323d7595cec1e2e6789', 
            '0c765a244c50529f532e3d519add63501fdd798473d6df284da9fc14b7b6edde', 
            '82863577e455f39ad9a83c04354be4a4d0652626b08f63565b3ba65320e119a4', 
            '4676f7720084c5b14f9b3a98414bf9a38e1c7837107f8fcc093bd9756aa24f31', 
            'bb0fe91528781d92c969c89dc856a2cee4723851b2e85e51cfb949377e8dc4b3', 
            '03321f758028e031e5a41f1bcd5c0576c053c647a578e15db0fda56ba7eb4ea1', 
            '2ef68fcc98f31f2237ef7bc0167ad76656c22492c2308d99f4f472f315805856', 
            '83e134dc09cd1e11cf9a5b6b39432a322dfed8eda81fb46364aab6d0060e9352', 
            '4b3087a9dd497ecd44c786ea38938d686a643f556f78b57c3dfb329c3f8883fa', 
            '5e4b887a2ecb937517664420235c669cab5e2b7a4e2d650de4414bec3d9700d0', 
        ];

        var result = "";
        for (var i = 0; i < list.length ; i++ ) {
            var h = list[i];

        }

        alert(result);
    }
</script>
<html>
	<body>
		<script type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
        <p>
    		<label>HASH: </label>
    		<input type="text" id="hash">
            <input type="button" onclick="getLand()" value="计算地块">
        </p>
        <p>
           <label>出价次数</label>
            <input type="text" id="times">
		      <input type="button" onclick="getPersonIndex()" value="计算拍卖">
        </p>
        <textarea id="output" style="height: 300px; width: 1000px"></textarea> 
	</body>
</html>